<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·∫°o C·ªßa Code - L·ªùi K·∫øt</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/animations.css">
    <link rel="stylesheet" href="assets/css/edge-glow.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container chapter-container">
        <header>
            <div class="home-header">
                <a href="index.html" class="home-link">ƒê·∫†O C·ª¶A CODE</a>
            </div>
            <nav class="navigation">
                <div class="chapter-nav chapter-header-nav" id="chapter-navigation">
                    <a href="chapter.html?id=81" class="prev-chapter">Ch∆∞∆°ng tr∆∞·ªõc</a>
                    <a href="index.html" class="next-chapter">Trang ch·ªß</a>
                </div>
            </nav>
        </header>
        
        <main class="chapter-content" id="outro-content">
            <!-- Outro content will be dynamically inserted here -->
        </main>
        
        <footer>
            <div class="chapter-footer-nav" id="footer-navigation">
                <a href="chapter.html?id=81" class="prev-chapter">Ch∆∞∆°ng tr∆∞·ªõc</a>
                <a href="index.html" class="next-chapter">Trang ch·ªß</a>
            </div>
            <div class="footer-content">
                <p>&copy; 2025 ƒê·∫°o C·ªßa Code</p>
            </div>
        </footer>
    </div>
    
    <div class="theme-switcher">
        <button class="theme-button light" data-theme="light" title="Light theme">‚òÄÔ∏è</button>
        <button class="theme-button dark" data-theme="dark" title="Dark theme">üåô</button>
        <button class="theme-button brown" data-theme="brown" title="Brown theme">üìú</button>
    </div>
    
    <script src="assets/js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Kh·ªüi t·∫°o theme manager t·ª´ main.js
            if (typeof themeManager !== 'undefined') {
                themeManager.init();
            }
            
            // T·∫£i n·ªôi dung c·ªßa outro.json
            fetch('data/outro.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    renderOutroContent(data);
                })
                .catch(error => {
                    console.error('Error loading outro data:', error);
                    document.getElementById('outro-content').innerHTML = '<p>ƒê√£ x·∫£y ra l·ªói khi t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i sau.</p>';
                });
        });
        
        // Render n·ªôi dung outro s·ª≠ d·ª•ng parseMarkdown
        function renderOutroContent(data) {
            const contentElement = document.getElementById('outro-content');
            if (!contentElement) return;
            
            let contentHTML = `<h1 class="chapter-heading fade-in">${data.title || 'L·ªùi K·∫øt'}</h1>`;
            
            // Render c√°c ƒëo·∫°n th∆° (verses)
            contentHTML += `<div class="verse-container">`;
            
            if (data.content?.verses?.length > 0) {
                data.content.verses.forEach(verse => {
                    contentHTML += `<p class="verse" id="${verse.id}">`;
                    
                    verse.lines.forEach((line, index) => {
                        // S·ª≠ d·ª•ng h√†m parseMarkdown
                        contentHTML += parseMarkdown(line);
                        if (index < verse.lines.length - 1) {
                            contentHTML += `<br>`;
                        }
                    });
                    
                    contentHTML += `</p>`;
                });
            }
            
            contentHTML += '</div>';
            
            // Hi·ªÉn th·ªã quote n·∫øu c√≥, s·ª≠ d·ª•ng c√πng class v·ªõi chapter
            if (data.content?.quote?.text) {
                contentHTML += `
                    <div class="comment-section">
                        <h3>L·ªùi cu·ªëi</h3>
                        <div class="commentary-content fade-in">
                            <div class="commentary-item">
                                <p>${parseMarkdown(data.content.quote.text)}</p>
                                ${data.content.quote.author ? `<p>‚Äî <em>${data.content.quote.author}</em></p>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }
            
            contentElement.innerHTML = contentHTML;
            
            // Fade-in animation
            document.querySelector('.container').classList.add('fade-in-content');
            
            // Edge glow elements
            if (typeof addGlowElements === 'function') {
                addGlowElements();
            }
            
            styleNavigation();
        }
        
        // H√†m n√†y √°p d·ª•ng c√πng ki·ªÉu d√°ng cho navigation nh∆∞ trong main.js
        function styleNavigation() {
            // Th√™m class fade-in cho animation
            const headerNav = document.getElementById('chapter-navigation');
            const footerNav = document.getElementById('footer-navigation');
            
            if (headerNav) {
                headerNav.classList.add('fade-in');
            }
            
            if (footerNav) {
                footerNav.classList.add('fade-in');
            }
        }
    </script>
</body>
</html>
